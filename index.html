<!DOCTYPE html>
<html>
    <head>
        <title>E aí, Chefito?</title>
        <meta property="og:title" content="E aí, Chefito?" />
        <meta property="og:description" content="Faça receitas com seus ingredientes usando o @eaichefito!" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="theme-color" content="#7CE2C5">
        <meta name="msapplication-TileColor" content="#7CE2C5">
        <meta name="msapplication-TileImage" content="img/favicon/ms-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="57x57" href="img/favicon/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="img/favicon/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="img/favicon/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="img/favicon/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="img/favicon/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="img/favicon/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="img/favicon/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="img/favicon/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="img/favicon/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="img/favicon/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
        <link rel="shortcut icon" href="img/favicon/favicon.ico" type="image/x-icon">
        <link rel="icon" href="img/favicon/favicon.ico" type="image/x-icon">
        <link rel="manifest" href="/manifest.json">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
    </head>
    <body>
        <header id="top">
            <div id="top-center">
                <a class="ic-facebook" href="http://facebook.com/eaichefito">
                    <img src="img/facebook@3x.png" />
                </a>
            </div>
        </header>
        <div>
            <div id="banner">
                <section class="content">
                    <img src="img/chefito@3x.jpg" />
                    <p>
                        Faça receitas com seus ingredientes usando o
                        <span class="text-dark-blue">
                            @eaichefito
                        </span>
                    </p>
                </section>
            </div>
            <div id="problem">
                <section class="content">
                    <img src="img/ingredientes@3x.jpg" />
                    <p>
                        É para você que tem dificuldade em achar receitas e ter todos os ingredientes.
                    </p>
                </section>
            </div>
            <div id="solution">
                <section class="content">
                    <p>
                        Nosso objetivo é achar a receita através dos seus ingredientes.
                    </p>
                    <img src="img/receita@3x.jpg" />
                    <p>
                        Otimizando seu tempo e fazendo que você não precise sair para comprar outros ingredientes
                    </p>
                </section>
            </div>
            <div id="chatbot">
                <section class="content">
                    <p id="chatbot-t1">
                        Não é preciso baixar o <span class="text-light-blue">@eaichefito</span> pois ele é um Chatbot* .
                    </p>
                    <img src="img/demo@3x.png" />
                    <p id="chatbot-t2" class="text-dark-blue">
                        <img src="img/logo-chefito@3x.png" /><br/>
                        É um chatbot que irá te ajudar a achar uma receita a partir de ingredientes que você tem em sua casa.
                    </p>
                    <p id="chatbot-t3">
                        * Chatbots são assistentes que funcionam em diversos aplicativos de mensagens, como: o Messenger do Facebook, Telegram, Skype e outros...
                    </p>
                </section>
            </div>
            <div id="tester">
                <section class="content">
                    <img onclick="checkLoginState()" src="img/logo.png" />
                    <p class="text-dark-blue">
                        <a href="javascript:checkLoginState()">Clique aqui</a>
                        para se tornar um beta tester do Chefito no Facebook!
                    </p>
                </section>
            </div>
            <div id="info">
                <section class="content">
                    <p class="text-dark-blue">
                        Receba as novidades sobre o @eaichefito
                    </p>
                    <input type="text" id="email" name="email" placeholder="digite aqui seu e-mail" />
                    <button type="button" onclick="saveEmail()">cadastrar</button>
                </section>
            </div>
            <!-- <div
                class="fb-like"
                data-share="true"
                data-width="450"
                data-show-faces="true">
            </div>-->
        </div>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
        <script type="text/javascript">
                        // This is called with the results from from FB.getLoginStatus().
                        function statusChangeCallback(response) {
                            if (response.status === 'connected') {
                                testAPI(response.authResponse.userID);
                            } else if (response.status === 'not_authorized') {
                            } else {
                                login();
                            }
                        }

                        function login() {
                            FB.login(function (response) {
                                if (response.authResponse) {
                                    testAPI(response.authResponse.userID);
                                }
                            });
                        }

                        function checkLoginState() {
                            FB.getLoginStatus(function (response) {
                                statusChangeCallback(response);
                            });
                        }

                        function testAPI(id) {
                            FB.api('/me', {"fields": "id,name,email,first_name,last_name"}, function (response) {
                                if (response.error) {
                                    login();
                                } else {
                                    saveTester(response);
                                }
                            });
                        }

                        function saveTester(response) {
                            ga('send', 'event', 'Cadastrar', 'tester', 'Cadastrar tester');
                            var tester = {
                                fbid: response.id,
                                name: response.name,
                                first_name: response.first_name,
                                last_name: response.last_name,
                                email: response.email
                            };
                            $.ajax({
                                url: 'http://fprojects.com.br:2000/eaichefito/api/tester',
                                type: 'post',
                                dataType: 'json',
                                data: tester,
                                success: function (response) {
                                    if (response.status) {
                                        if (response.data.upserted) {
                                            alert("Registramos o seu interesse em ser um dos nosso testers! =D");
                                        } else {
                                            alert("Você já faz parte do nosso grupo de testers. =)");
                                        }
                                    }
                                }
                            });
                        }

                        function saveEmail() {
                            ga('send', 'event', 'Cadastrar', 'e-mail', 'Cadastrar e-mail');
                            var email = $('#email').val();
                            if (!email.length) {
                                alert('Informe seu e-mail para mantermos contato.');
                            } else {
                                var prospect = {
                                    email: email
                                }
                                $.ajax({
                                    url: 'http://fprojects.com.br:2000/eaichefito/api/prospect',
                                    type: 'post',
                                    dataType: 'json',
                                    data: prospect,
                                    success: function (response) {
                                        if (response.status) {
                                            if (response.data.upserted) {
                                                alert("Agora você receberá todas as nossas novidades no seu e-mail! =D");
                                            } else {
                                                alert("Já registramos o seu e-mail! Aguarde as novidades. =)");
                                            }
                                            $('#email').val('');
                                        }
                                    }
                                });
                            }
                        }

                        // Load the SDK asynchronously
                        (function (d, s, id) {
                            var js, fjs = d.getElementsByTagName(s)[0];
                            if (d.getElementById(id))
                                return;
                            js = d.createElement(s);
                            js.id = id;
                            js.src = "https://connect.facebook.net/en_US/sdk.js";
                            fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        window.fbAsyncInit = function () {
                            FB.init({
                                appId: '1407612189291739',
                                xfbml: true,
                                cookie: true,
                                version: 'v2.8'
                            });
                        };
                        (function (i, s, o, g, r, a, m) {
                            i['GoogleAnalyticsObject'] = r;
                            i[r] = i[r] || function () {
                                (i[r].q = i[r].q || []).push(arguments)
                            }, i[r].l = 1 * new Date();
                            a = s.createElement(o),
                                    m = s.getElementsByTagName(o)[0];
                            a.async = 1;
                            a.src = g;
                            m.parentNode.insertBefore(a, m)
                        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
                        ga('create', 'UA-87097301-1', 'auto');
                        ga('send', 'pageview');
                        $(window).scroll(function () {
                            if ($(document).scrollTop() > 0) {
                                $('#top').addClass('box-shadow');
                            } else {
                                $('#top').removeClass('box-shadow');
                            }
                        });
        </script>
    </body>
</html>

